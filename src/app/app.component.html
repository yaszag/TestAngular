<ul>
  <ng-container
    *ngTemplateOutlet="recursiveData; context:{ $implicit: data$ | async }"
  ></ng-container>
</ul>

<ng-template #recursiveData let-data >
  <li *ngFor="let item of data ">
   <a (click)="item.selected = !item.selected">{{ item.name }}</a> 
    <ul  *ngIf="item.submenus?.length > 0 ">
      <ng-container
        *ngTemplateOutlet="recursiveData; context:{ $implicit: item.submenus }"
      ></ng-container>
    </ul>
  </li>
</ng-template>